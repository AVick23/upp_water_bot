# **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: Telegram-–±–æ—Ç ¬´–í–æ–¥–∞ –∑–∞ –¥–µ–Ω—å¬ª**

## **1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ**  
–ë–æ—Ç –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≤–æ–¥—ã, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é –Ω–æ—Ä–º—É —Å —É—á—ë—Ç–æ–º —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ **–∞–∫—Ç—É–∞–ª—å–Ω–æ–π –ø–æ–≥–æ–¥—ã**, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—é –∏ –º–µ—Å—è—Ü. –í—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è ‚Äî —á–µ—Ä–µ–∑ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Äî –ø–æ—à–∞–≥–æ–≤–∞—è —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –ª—é–±—ã—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤. –ü—Ä–æ—Ñ–∏–ª—å –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø–æ–ª—è–º –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ª–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

---

## **2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**

### **2.1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`/start`)**
- **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ**:  
  –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞ –∏ –∫–Ω–æ–ø–∫–∞ **¬´–ù–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é¬ª**.  
  –î–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∫–Ω–æ–ø–æ–∫:  
  - üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**,  
  - ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**,  
  - ‚úèÔ∏è **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å**.

- **–ü–æ—à–∞–≥–æ–≤—ã–π –¥–∏–∞–ª–æ–≥** (—á–µ—Ä–µ–∑ `ConversationHandler` —Å–æ states):  
  –ö–∞–∂–¥—ã–π —à–∞–≥ –≤–∫–ª—é—á–∞–µ—Ç:  
  - –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–µ—Å–ª–∏ –≤–≤–µ–¥–µ–Ω–æ).  
  - –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏: ‚óÄÔ∏è **–ù–∞–∑–∞–¥**, ‚ñ∂Ô∏è **–î–∞–ª–µ–µ** / **–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å**, ‚úèÔ∏è **–ò–∑–º–µ–Ω–∏—Ç—å**.

  **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤**:  
  1. **–í–µ—Å** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –∫–≥): –¥–∏–∞–ø–∞–∑–æ–Ω 30‚Äì200.  
  2. **–†–æ—Å—Ç** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —Å–º): –¥–∏–∞–ø–∞–∑–æ–Ω 100‚Äì250.  
  3. **–ü–æ–ª** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): üë® –ú—É–∂—Å–∫–æ–π / üë© –ñ–µ–Ω—Å–∫–∏–π.  
  4. **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): üê¢ –ù–∏–∑–∫–∞—è / üö∂ –°—Ä–µ–¥–Ω—è—è / üèÉ –í—ã—Å–æ–∫–∞—è.  
  5. **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):  
     - –°–ø–∏—Å–æ–∫ –∏–∑ 11 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ—è—Å–æ–≤ –†–§ + üåç **–î—Ä—É–≥–æ–π** (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥ `Region/City`).  
     - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ 2 —Å—Ç–æ–ª–±—Ü–∞.  
  6. **–í—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:  
     - **–®–∞–≥ 6–∞**: –ù–∞—á–∞–ª–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ (–ß–ß:–ú–ú) + üïó **–°—Ç–∞–Ω–¥–∞—Ä—Ç (08:00‚Äì22:00)**.  
     - **–®–∞–≥ 6–±** (–µ—Å–ª–∏ –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç): –ö–æ–Ω–µ—Ü –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ (–ß–ß:–ú–ú).  
  7. **–ì–æ—Ä–æ–¥** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):  
     - –í–≤–æ–¥ + ‚è≠ **–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å** + –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ OpenWeatherMap.  
  8. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**:  
     - –°–≤–æ–¥–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è + ‚úÖ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å** / üîÅ **–ò–∑–º–µ–Ω–∏—Ç—å**.

---

### **2.2. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)**
–ü–æ—Å–ª–µ `/start` –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ª—é–±–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –º–µ–Ω—é —Å —Ç—Ä–µ–º—è –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∞–º–∏.

#### **2.2.1. üìä ¬´–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–µ—Ä–∏–æ–¥: **–°–µ–≥–æ–¥–Ω—è / –ù–µ–¥–µ–ª—è / –ú–µ—Å—è—Ü** (–∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏).  
- –ë–æ—Ç –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `water_logs` –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥:  
  - –°–ø–∏—Å–æ–∫ –¥–Ω–µ–π —Å –æ–±—ä—ë–º–∞–º–∏,  
  - –û–±—â–∏–π –æ–±—ä—ë–º (–º–ª –∏ —Å—Ç–∞–∫–∞–Ω—ã),  
  - –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–æ—Ä–º—ã.  
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Üí —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

#### **2.2.2. ‚öôÔ∏è ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π¬ª**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (`–≤–∫–ª—é—á–µ–Ω—ã` / `–æ—Ç–∫–ª—é—á–µ–Ω—ã`).  
- –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏:  
  - üîî **–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**,  
  - üîï **–û—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**.  
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ `notifications_enabled` –≤ –ë–î –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.  
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –∫–æ–º–∞–Ω–¥–µ `/notifications`.

#### **2.2.3. ‚úèÔ∏è ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å¬ª**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å —Å –∫—Ä–∞—Ç–∫–æ–π —Å–≤–æ–¥–∫–æ–π.  
- –ü–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º ‚Äî –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è:  
  - ‚úèÔ∏è **–ò–∑–º–µ–Ω–∏—Ç—å –≤–µ—Å**,  
  - ‚úèÔ∏è **–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ—Å—Ç**,  
  - ‚úèÔ∏è **–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª**,  
  - ‚úèÔ∏è **–ò–∑–º–µ–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**,  
  - ‚úèÔ∏è **–ò–∑–º–µ–Ω–∏—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å**,  
  - ‚úèÔ∏è **–ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**,  
  - ‚úèÔ∏è **–ò–∑–º–µ–Ω–∏—Ç—å –≥–æ—Ä–æ–¥**,  
  - ‚ùå **–û—Ç–º–µ–Ω–∞**.  
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ–ª—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–º–∏–Ω–∏-–¥–∏–∞–ª–æ–≥** (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —à–∞–≥—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—è).  
- –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î, –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞ –≤–æ–¥—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç.  
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ `timezone` –∏–ª–∏ `notification_time` –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π **—Å –º–æ–º–µ–Ω—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞—Å—á—ë—Ç–∞**.

---

### **2.3. –†–∞—Å—á—ë—Ç –Ω–æ—Ä–º—ã –≤–æ–¥—ã**
- **–ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞**: `–≤–µ—Å √ó 30 –º–ª √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç_–ø–æ–ª–∞ √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç_–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏`.  
  - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã: –º—É–∂—Å–∫–æ–π √ó1.1, –∂–µ–Ω—Å–∫–∏–π √ó1.0; –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –Ω–∏–∑–∫–∞—è √ó1.0, —Å—Ä–µ–¥–Ω—è—è √ó1.1, –≤—ã—Å–æ–∫–∞—è √ó1.2.  
- **–ü–æ–≥–æ–¥–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è** (–µ—Å–ª–∏ –≥–æ—Ä–æ–¥ —É–∫–∞–∑–∞–Ω):  
  - –ó–∞–ø—Ä–æ—Å **–∞–∫—Ç—É–∞–ª—å–Ω–æ–π –ø–æ–≥–æ–¥—ã** —á–µ—Ä–µ–∑ OpenWeatherMap API –≤ –º–æ–º–µ–Ω—Ç —Ä–∞—Å—á—ë—Ç–∞.  
  - +5% –∫ –Ω–æ—Ä–º–µ –∑–∞ –∫–∞–∂–¥—ã–µ 5¬∞C –≤—ã—à–µ 20¬∞C (–º–∞–∫—Å. +30%).  
- **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ**: –∏—Ç–æ–≥–æ–≤–∞—è –Ω–æ—Ä–º–∞ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è **–≤–≤–µ—Ä—Ö –¥–æ –±–ª–∏–∂–∞–π—à–∏—Ö 250 –º–ª** (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ —Å—Ç–∞–∫–∞–Ω–æ–≤).

---

### **2.4. –£—á—ë—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≤–æ–¥—ã**
- **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä—ë–º**: –∫–∞–∂–¥–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫—É **¬´–Ø –≤—ã–ø–∏–ª üíß (250 –º–ª)¬ª**.  
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ‚Äî –∑–∞–ø–∏—Å—å `(user_id, –¥–∞—Ç–∞, 250)` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `water_logs`.  
- –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º: ¬´‚úÖ –ó–∞—Å—á–∏—Ç–∞–Ω–æ! X –∏–∑ Y —Å—Ç–∞–∫–∞–Ω–æ–≤¬ª.

---

### **2.5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

#### **–û–±—â–∞—è –ª–æ–≥–∏–∫–∞**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `notifications_enabled = TRUE`**.  
- –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ **–ª–æ–∫–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**.

#### **–†–∞—Å—á—ë—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è**
- **–ö–æ–≥–¥–∞**: –û–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å ‚Äî **–≤ –º–æ–º–µ–Ω—Ç –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è `notification_start` –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**.  
- **–ö–∞–∫**:  
  1. –°–∫–∞–Ω–∏—Ä—É—é—â–∏–π –¥–∂–æ–± (—Å–º. –Ω–∏–∂–µ) –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞—Å—Ç—É–ø–∏–ª–æ `notification_start` –∏ —Ä–∞—Å—á—ë—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–Ω.  
  2. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç **–∞–∫—Ç—É–∞–ª—å–Ω—É—é –ø–æ–≥–æ–¥—É**, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ—Ä–º—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞–∫–∞–Ω–æ–≤.  
  3. –§–æ—Ä–º–∏—Ä—É–µ—Ç **—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª `[notification_start, notification_end]`:  
     - –ü–µ—Ä–≤–æ–µ ‚Äî —Ä–æ–≤–Ω–æ –≤ `start`,  
     - –ü–æ—Å–ª–µ–¥–Ω–µ–µ ‚Äî —Ä–æ–≤–Ω–æ –≤ `end`,  
     - –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ ‚Äî —Å —Ä–∞–≤–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏.  
  4. –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `daily_schedule` (—Å–º. —Ä–∞–∑–¥–µ–ª 3).  
- **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: —Ä–∞—Å—á—ë—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å** –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### **–°–∫–∞–Ω–∏—Ä—É—é—â–∏–π –¥–∂–æ–±**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ø–æ UTC**.  
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:  
  1. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ–≥–æ **—Ç–µ–∫—É—â—É—é –ª–æ–∫–∞–ª—å–Ω—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è**.  
  2. –ï—Å–ª–∏ `–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è ‚â• notification_start` –∏ –∑–∞–ø–∏—Å—å –≤ `daily_schedule` –¥–ª—è —ç—Ç–æ–π –¥–∞—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ä–∞—Å—á—ë—Ç.  
  3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞—Å—Ç—É–ø–∏–ª–æ –ª–∏ –≤—Ä–µ–º—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç, –µ—Å–ª–∏ –¥–∞.  
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:  
  - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –ø–æ–≥–æ–¥–∞,  
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —á—ë—Ç–∫–æ –≤ `start`,  
  - –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º (–≥—Ä–∞—Ñ–∏–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î).

#### **–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
1. **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ**:  
   - –£—Ç—Ä–µ–Ω–Ω–µ–µ (–ø–µ—Ä–≤–æ–µ –≤ –≥—Ä–∞—Ñ–∏–∫–µ) ‚Äî —Å –ø–æ–≥–æ–¥–æ–π –∏ –Ω–æ—Ä–º–æ–π,  
   - –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ ‚Äî —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ ¬´–Ø –≤—ã–ø–∏–ª¬ª,  
   - –ò—Ç–æ–≥ –¥–Ω—è (–≤ `notification_end`) ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –¥–µ–Ω—å.  
2. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ**: –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 09:00 (–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è) ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ–¥–µ–ª—å.  
3. **–ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ**: 1-–µ —á–∏—Å–ª–æ, 09:00 (–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è) ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Å—è—Ü–µ–≤.

---

### **2.6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã**
- `/start` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö) –∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–¥–ª—è –Ω–æ–≤—ã—Ö).  
- `/notifications` ‚Äî –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –∫–Ω–æ–ø–∫–µ **¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π¬ª**.  
- `/stats` ‚Äî –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –∫–Ω–æ–ø–∫–µ **¬´–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª**.

---

## **3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (SQLite)**

### **–¢–∞–±–ª–∏—Ü–∞ `users`**
| –ü–æ–ª–µ                  | –¢–∏–ø         | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
|-----------------------|-------------|----------------|
| `user_id`             | INTEGER (PK)| –î–∞             |
| `weight`              | INTEGER     | –î–∞             |
| `height`              | INTEGER     | –î–∞             |
| `gender`              | TEXT        | –î–∞             |
| `activity_level`      | TEXT        | –î–∞             |
| `timezone`            | TEXT        | **–î–∞**         |
| `notification_start`  | TEXT        | –î–∞             |
| `notification_end`    | TEXT        | –î–∞             |
| `city`                | TEXT        | –ù–µ—Ç            |
| `notifications_enabled`| BOOLEAN    | –î–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é TRUE) |
| `created_at`          | DATETIME    | –î–∞             |

### **–¢–∞–±–ª–∏—Ü–∞ `water_logs`**
| –ü–æ–ª–µ       | –¢–∏–ø    |
|------------|--------|
| `id`       | INTEGER (PK) |
| `user_id`  | INTEGER |
| `date`     | DATE (YYYY-MM-DD) |
| `ml`       | INTEGER |

### **–¢–∞–±–ª–∏—Ü–∞ `daily_schedule`**
| –ü–æ–ª–µ            | –¢–∏–ø         | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------------|-------------|--------|
| `id`            | INTEGER (PK)| ‚Äî |
| `user_id`       | INTEGER     | ‚Äî |
| `date_local`    | DATE        | –õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, '2025-11-25') |
| `generated_at`  | DATETIME    | –ö–æ–≥–¥–∞ –±—ã–ª —Å–¥–µ–ª–∞–Ω —Ä–∞—Å—á—ë—Ç (UTC) |
| `goal_ml`       | INTEGER     | –†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è –Ω–æ—Ä–º–∞ –Ω–∞ –¥–µ–Ω—å |
| `reminder_times`| TEXT        | JSON-–º–∞—Å—Å–∏–≤: `["08:00", "11:20", ...]` |

---

## **4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**
- **–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**: –†—É—Å—Å–∫–∏–π.  
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: `python-telegram-bot` v20+ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º).  
- **–í–Ω–µ—à–Ω–∏–µ API**: OpenWeatherMap (–ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤).  
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:  
  - –í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —Å—Ç—Ä–æ–≥—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é,  
  - SQL-–∑–∞–ø—Ä–æ—Å—ã –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π,  
  - API-–∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.  
- **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å**:  
  - –°–∫–∞–Ω–∏—Ä—É—é—â–∏–π –¥–∂–æ–± –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç,  
  - –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î ‚Üí –ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

---

## **5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
- **–û–±—ä—ë–º –≤–æ–¥—ã**: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∞–∫–∞–Ω 250 –º–ª (–Ω–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –æ–±—ä—ë–º–∞).  
- **–ì–æ—Ä–æ–¥**: –≤–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–∞—Å—á—ë—Ç –Ω–æ—Ä–º—ã –∏ —É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—é –ø–æ–≥–æ–¥—ã.  
- **–ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞**: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ IANA Time Zone IDs (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Europe/Moscow`).

---

## **6. –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
- –ì—Ä–∞—Ñ–∏–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –≤–∏–¥–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –æ–±—ä—ë–º–∞ –≤–æ–¥—ã (500 –º–ª, 1 –ª).  
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–∫–µ—Ä–∞–º–∏.  
- –°–µ–º–µ–π–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã.

---


### üå≤ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–≤ –≤–∏–¥–µ UNIX-–¥–µ—Ä–µ–≤–∞)**

```bash
water_bot/
‚îú‚îÄ‚îÄ .env                          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git!)
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ bot.py                        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (main)
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ settings.py               # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ .env
‚îÇ
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ bot_instance.py           # –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Application
‚îÇ   ‚îî‚îÄ‚îÄ logger.py                 # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py                 # –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (Users, WaterLog –∏ —Ç.–¥.)
‚îÇ   ‚îî‚îÄ‚îÄ db_manager.py             # –ö–ª–∞—Å—Å DatabaseManager: –≤—Å–µ CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ water_calculator.py       # –†–∞—Å—á—ë—Ç –Ω–æ—Ä–º—ã –≤–æ–¥—ã (—Å –ø–æ–≥–æ–¥–æ–π)
‚îÇ   ‚îú‚îÄ‚îÄ weather_service.py        # –†–∞–±–æ—Ç–∞ —Å OpenWeatherMap API
‚îÇ   ‚îî‚îÄ‚îÄ scheduler_service.py      # –õ–æ–≥–∏–∫–∞ —Å–∫–∞–Ω–∏—Ä—É—é—â–µ–≥–æ –¥–∂–æ–±–∞ –∏ —Ä–∞—Å—á—ë—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ start_handler.py          # /start –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ registration_handler.py   # ConversationHandler –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ profile_handler.py        # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ water_handler.py          # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ ¬´–Ø –≤—ã–ø–∏–ª¬ª
‚îÇ   ‚îú‚îÄ‚îÄ stats_handler.py          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (/stats –∏ –∫–Ω–æ–ø–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ notifications_handler.py  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ (/notifications)
‚îÇ   ‚îî‚îÄ‚îÄ callback_handlers.py      # –û–±—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–æ–∫
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ time_utils.py             # –†–∞–±–æ—Ç–∞ —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤—Ä–µ–º—ë–Ω
‚îÇ   ‚îú‚îÄ‚îÄ validation.py             # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–µ—Å–∞, –≤—Ä–µ–º–µ–Ω–∏, —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ keyboards.py              # –§–∞–±—Ä–∏–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä (–∏–Ω–ª–∞–π–Ω –∏ reply)
‚îÇ
‚îî‚îÄ‚îÄ jobs/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îî‚îÄ‚îÄ reminder_job.py           # –°–∫–∞–Ω–∏—Ä—É—é—â–∏–π –¥–∂–æ–± (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
```

---

## üîç **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

### **1. –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞**
- **`bot.py`**: —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `core.bot_instance`, –∑–∞–ø—É—Å–∫–∞–µ—Ç polling.
- **`.env`**:  
  ```env
  BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
  OPENWEATHER_API_KEY=your_key_here
  DATABASE_URL=sqlite:///data/water_bot.db
  ```
- **`requirements.txt`**: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`python-telegram-bot`, `python-dotenv`, `pytz`, `requests`, `apscheduler` –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è).

---

### **2. `config/` ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏**
- **`settings.py`**:  
  ```python
  from pydantic_settings import BaseSettings  # –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ os.getenv
  
  class Settings:
      bot_token: str
      openweather_api_key: str
      database_url: str
  ```

---

### **3. `core/` ‚Äî –Ø–¥—Ä–æ –±–æ—Ç–∞**
- **`bot_instance.py`**:  
  –°–æ–∑–¥–∞—ë—Ç `Application`, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç `JobQueue`, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ë–î, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ö–µ–Ω–¥–ª–µ—Ä—ã.
- **`logger.py`**: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `logging` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

---

### **4. `database/` ‚Äî –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏**
- **`models.py`**:  
  –ß—ë—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ `SQLAlchemy` –∏–ª–∏ —á–∏—Å—Ç—ã–π `sqlite3`).
- **`db_manager.py`**:  
  –ö–ª–∞—Å—Å `DatabaseManager` —Å –º–µ—Ç–æ–¥–∞–º–∏:  
  - `get_user(user_id)`,  
  - `save_water_log(user_id, ml)`,  
  - `get_due_reminders_for_schedule()`,  
  - `mark_reminder_sent(reminder_id)`,  
  - –∏ —Ç.–¥.

> ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –µ—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞ —Ä–µ—à–∏—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ PostgreSQL ‚Äî –º–µ–Ω—è–µ—Ç–µ **—Ç–æ–ª—å–∫–æ —ç—Ç—É –ø–∞–ø–∫—É**.

---

### **5. `services/` ‚Äî –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞**
–ó–¥–µ—Å—å **–≤—Å—è ¬´—É–º–Ω–∞—è¬ª –ª–æ–≥–∏–∫–∞**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è –æ—Ç Telegram.

- **`water_calculator.py`**:  
  ```python
  def calculate_daily_norm(user: User, current_temp: float | None) -> int:
      ...
  ```
- **`weather_service.py`**:  
  –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ OpenWeatherMap, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.
- **`scheduler_service.py`**:  
  ```python
  def generate_reminder_schedule(user: User, norm_ml: int) -> list[str]:
      # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ["08:00", "11:20", ...]
  ```

> ‚úÖ –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞**.

---

### **6. `handlers/` ‚Äî –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º**
–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª ‚Äî **–æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞**.

- **`registration_handler.py`**:  
  –ü–æ–ª–Ω—ã–π `ConversationHandler` —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π.
- **`profile_handler.py`**:  
  –ú–∏–Ω–∏-–¥–∏–∞–ª–æ–≥–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è.
- **`water_handler.py`**:  
  –û–±—Ä–∞–±–æ—Ç–∫–∞ `CallbackQuery` –ø–æ –∫–Ω–æ–ø–∫–µ ¬´–Ø –≤—ã–ø–∏–ª¬ª.
- **`callback_handlers.py`**:  
  –û–±—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–≤–∏–≥–∞—Ü–∏—è ¬´–ù–∞–∑–∞–¥¬ª –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏).

> ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: —Å–æ–∑–¥–∞–ª–∏ `new_feature_handler.py` ‚Üí –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –≤ `bot_instance.py`.

---

### **7. `utils/` ‚Äî –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã**
- **`time_utils.py`**:  
  ```python
  def get_user_local_time(user_tz: str) -> datetime:
      ...
  
  def is_time_to_start_reminders(user: User) -> bool:
      ...
  ```
- **`keyboards.py`**:  
  ```python
  def get_timezone_keyboard() -> InlineKeyboardMarkup:
      ...
  
  def get_main_menu() -> InlineKeyboardMarkup:
      ...
  ```

---

### **8. `jobs/` ‚Äî –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏**
- **`reminder_job.py`**:  
  ```python
  async def check_and_send_reminders(context: ContextTypes.DEFAULT_TYPE):
      # 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
      # 2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –ø–æ—Ä–∞ –ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
      # 3. –í—ã–∑–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
  ```

> ‚úÖ –õ–æ–≥–∏–∫–∞ –¥–∂–æ–±–∞ **–Ω–µ –∑–Ω–∞–µ—Ç –æ Telegram** ‚Äî –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `services` –∏ `handlers`.

---

## üß© **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**

| –ü—Ä–∏–Ω—Ü–∏–ø | –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω |
|--------|----------------|
| **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** | –ö–∞–∂–¥–∞—è –ø–∞–ø–∫–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–æ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (–ë–î, –ª–æ–≥–∏–∫–∞, UI). |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | `services/` –∏ `utils/` –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ Telegram. |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª = –Ω–æ–≤—ã–π —Ñ–∞–π–ª –≤ `handlers/` + –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏). |
| **–õ—ë–≥–∫–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** | –ó–∞–º–µ–Ω–∞ –ë–î, API –∏–ª–∏ –ª–æ–≥–∏–∫–∏ ‚Äî –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏. |
| **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** | –ù–æ–≤—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ä–∞–∑—É –ø–æ–Ω–∏–º–∞–µ—Ç, –≥–¥–µ —á—Ç–æ –ª–µ–∂–∏—Ç. |

---

## ‚ñ∂Ô∏è **–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É (–ø—Ä–∏–º–µ—Ä)**

–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å `/export` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ CSV?

1. –°–æ–∑–¥–∞—ë—Ç–µ `handlers/export_handler.py`.
2. –ü–∏—à–µ—Ç–µ –ª–æ–≥–∏–∫—É —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ `services/export_service.py`.
3. –î–æ–±–∞–≤–ª—è–µ—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ `core/bot_instance.py`:
   ```python
   app.add_handler(CommandHandler("export", export_handler))
   ```

–ì–æ—Ç–æ–≤–æ ‚Äî –±–µ–∑ –∫–∞—Å–∞–Ω–∏—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞.

---

–¢–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **–≤–∞—à–µ–≥–æ –±–æ—Ç–∞** –∏ –ª–µ–≥–∫–æ –≤—ã–¥–µ—Ä–∂–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª—é–±–æ–π –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –æ—Ç —Å–µ–º–µ–π–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –¥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Apple Health.
